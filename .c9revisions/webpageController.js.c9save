{"ts":1370275283377,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"//**************\r\n// Data types\r\n//**************\r\nfunction Response(){ //결과값\r\n    var MessageNum;\r\n\tvar id;\r\n\tvar success;\r\n}\r\n\r\n\r\n\r\n\r\nvar ID_CONN_PAIR = [];\r\nvar mysqlConn;\r\nvar socket;\r\n\r\n\r\nvar WebpageTools = require(\"./webpageTools\");\r\n\r\n//**************\r\n// Functions\r\n//**************\r\nexports.call = function(_socket, received, _ID_CONN_PAIR, mysqlConnection){\r\n\t\r\n    ID_CONN_PAIR = _ID_CONN_PAIR;\r\n    mysqlConn = mysqlConnection;\r\n    socket = _socket;\r\n    \r\n    \r\n\tconsole.log(\"web page controller call function\");\r\n\r\n\r\n\t//MessageNum에 따라서 분기 - 각각의 처리에 맞는 함수 호출\r\n\t    switch( parseInt(received.MessageNum, 10) ){\r\n\t\tcase WebpageTools.CLIENT_REQUEST_LOGIN:\r\n        clientRequestLogin(received);\r\n\t\t\tbreak;\r\n\t\tcase 303:\r\n\t\t\tbreak;\r\n\t\tcase 305:\r\n\t\t\tbreak;\r\n\t\tcase 307: \r\n\t\t\tbreak;\r\n\t\tcase 311:\r\n\t\t\tbreak;\r\n\t\tcase 313:\r\n\t\t\tbreak;\r\n\t\tcase 315:\r\n\t\t\tbreak;\r\n\t\tcase 317:\r\n\t\t\tbreak;\r\n\t\tcase 319:\r\n\t\t\tbreak;\r\n\t\tcase 321:\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n\r\n}\r\n\r\n\r\n\r\nfunction clientRequestLogin(received){\r\n    \r\n    console.log( \"fuction clientRequestLogin \" );\r\n    \r\n    var res = WebpageTools.newResponse();\r\n    res.MessageNum = WebpageTools.SERVER_RESPONSE_LOGIN;\r\n    res.id = received.id;\r\n    res.success = 1; //별일 없으면 요청은 성공한다. \r\n    res.is_success = 0; //is_success 는 로그인을 성공했는가 이다. \r\n    \r\n    var query = \"select teacherPw from latte_teacher where teacherId = '\"+received.id+\"'\";\r\n    \r\n    mysqlConn.query(query, function (err, rows){\r\n    if(err){\r\n        console.log(\"mysql query err\");\r\n        console.log(err);\r\n        res.success = 0;\r\n    }\r\n    \r\n    else if( rows.length ) {\r\n   \r\n         console.log( \" rrrr : \"+rows[0].teacherPw);\r\n         \r\n         if( received.password == rows[0].teacherPw){\r\n             res.is_success = 1;\r\n         }\r\n    }\r\n    \r\n    //결과는 마이에스큐엘까지 끝난 다음 반환한다. \r\n        //결과 보내기\r\n        socket.emit('data', res) ;\r\n    \r\n    \r\n    });\r\n    \r\n}\r\n"]],"start1":0,"start2":0,"length1":0,"length2":1908}]],"length":1908}
{"contributors":[],"silentsave":false,"ts":1370340211930,"patch":[[{"diffs":[[0,"**\r\n"],[-1,"function Response(){ //결과값\r\n    var MessageNum;\r\n\tvar id;\r\n\tvar success;\r\n}\r\n\r\n\r\n\r\n"],[0,"\r\nva"]],"start1":47,"start2":47,"length1":91,"length2":8},{"diffs":[[0,"ocket;\r\n"],[-1,"\r\n\r\n"],[0,"var Webp"]],"start1":98,"start2":98,"length1":20,"length2":16},{"diffs":[[0,"s\");\r\n\r\n"],[-1,"//"],[1,"\r\n//*******"],[0,"********"]],"start1":147,"start2":147,"length1":18,"length2":27},{"diffs":[[0,"****\r\n//"],[1," Main Logic"],[0," Functio"]],"start1":176,"start2":176,"length1":16,"length2":27},{"diffs":[[0,"Function"],[-1,"s"],[0,"\r\n//****"]],"start1":196,"start2":196,"length1":17,"length2":16},{"diffs":[[0,"********"],[1,"**"],[1,"*****\r\n"],[0,"\r\nexport"]],"start1":214,"start2":214,"length1":16,"length2":25},{"diffs":[[0,"\r\n    \r\n"],[-1,"    \r\n"],[0,"\tconsole"]],"start1":403,"start2":403,"length1":22,"length2":16},{"diffs":[[0,"n\");\r\n\r\n"],[-1,"\r\n"],[0,"\t//Messa"]],"start1":457,"start2":457,"length1":18,"length2":16},{"diffs":[[0," 함수 호출\r\n"],[-1,"\t"],[0,"    swit"]],"start1":499,"start2":499,"length1":17,"length2":16},{"diffs":[[0,"10) ){\r\n"],[-1,"\t\t"],[1,"        "],[0,"case Web"]],"start1":549,"start2":549,"length1":18,"length2":24},{"diffs":[[0,"T_LOGIN:"],[-1,"\r\n"],[1," //301\r\n    "],[0,"        "]],"start1":596,"start2":596,"length1":18,"length2":28},{"diffs":[[0,");\r\n"],[-1,"\t\t\tbreak;\r\n\t\tcase 303:\r\n\t\t\tbreak;\r\n\t\tcase "],[1,"            break;\r\n        case WebpageTools.CLIENT_REQUEST_LOGOUT: //303\r\n            clientRequestLogout(received);\r\n            break;\r\n        case WebpageTools.CLIENT_REQUEST_CLASSLIST: //"],[0,"305"],[-1,":"],[0,"\r\n"],[-1,"\t\t\tbreak;\r\n\t\tcase 307: \r\n\t\t\tbreak;\r\n\t\tcase "],[1,"            clientRequestClasslist(received);\r\n            break;\r\n        case WebpageTools.CLIENT_REQUEST_VIEWLECTURELIST: //307 \r\n            break;\r\n        case WebpageTools.CLIENT_REQUEST_CLASSORGANIZE: //309\r\n            break;\r\n        case WebpageTools.CLIENT_REQUEST_CLASSSAVE: //"],[0,"311"],[-1,":"],[0,"\r\n"],[-1,"\t\t\tbreak;\r\n\t\tcase "],[1,"            break;\r\n        case WebpageTools.CLIENT_REQUEST_PPTLIST: //"],[0,"313"],[-1,":"],[0,"\r\n"],[-1,"\t\t\tbreak;\r\n\t\tcase "],[1,"            break;\r\n        case WebpageTools.CLIENT_REQUEST_PPTUPLOAD: //"],[0,"315"],[-1,":"],[0,"\r\n"],[-1,"\t\t\tbreak;\r\n\t\tcase "],[1,"            break;\r\n        case WebpageTools.CLIENT_REQUEST_WORKSHEETLIST: //"],[0,"317"],[-1,":"],[0,"\r\n"],[-1,"\t\t\tbreak;\r\n\t\tcase "],[1,"            break;\r\n        case WebpageTools.CLIENT_REQUEST_WORKSHEETUPLOAD: //"],[0,"319"],[-1,":"],[0,"\r\n"],[-1,"\t\t\tbreak;\r\n\t\tcase "],[1,"            break;\r\n        case WebpageTools.CLIENT_REQUEST_VIEWATTENDLIST: //"],[0,"321"],[-1,":"],[0,"\r\n"],[-1,"\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n\r\n}\r\n\r\n"],[1,"            break;\r\n        default:\r\n            break;\r\n\t}\r\n\r\n}\r\n\r\n//**************\r\n// Functions\r\n//**************"],[0,"\r\n\r\n"]],"start1":651,"start2":651,"length1":270,"length2":1027},{"diffs":[[0,". \r\n    "],[-1,"    "],[0,""],[1,""],[0,"//결과 보내기"]],"start1":2525,"start2":2525,"length1":20,"length2":16},{"diffs":[[0,"    "],[1,"});"],[0,"\r\n    \r\n"],[-1,"    });"],[1,"}\r\n\r\nfunction clientRequestLogout(received){\r\n    var res = WebpageTools.newResponse();\r\n    res.MessageNum = WebpageTools.SERVER_RESPONSE_LOGOUT;\r\n    res.is_success = 1;\r\n    \r\n    socket.emit('data',res);   \r\n    \r\n}\r\n\r\nfunction clientRequestClasslist(received){\r\n    \r\n    var res = WebpageTools.newResponse();\r\n    var list;\r\n    \r\n    res.MessageNum = WebpageTools.SREVER_RESPONSE_CLASSLIST;\r\n        \r\n    var query = \"select latte_subject.subjectNum,latte_subject.subjectName,latte_subject.subjectClass\"\r\n                + \" from latte_subject \"\r\n                + \" left join latte_teach \"\r\n                + \" inner join latte_teacher \"\r\n                + \" on latte_teacher.teacherNum = latte_teach.teacherNum \"\r\n                + \" on latte_subject.subjectNum = latte_teach.subjectNum \"\r\n                + \" where teacherID= '\" + received.id + \"' \";\r\n    \r\n    mysqlConn.query(query, function (err, rows){\r\n        if(err){\r\n            console.log(\"mysql query err\");\r\n            console.log(err);\r\n            res.success = 0;\r\n        }\r\n        \r\n        else if( rows.length ) {\r\n            \r\n            list = new Array(rows.length);\r\n            \r\n            for(var i = 0 ; i < rows.length ; i++){ //결과 -  for문 돌면서 list에 push\r\n                var sub_inf = WebpageTools.newSubjectInfo();\r\n                sub_inf.subjectNum = rows[i].subjectNum;\r\n                sub_inf.subjectName = rows[i].subjectName;\r\n                sub_inf.subjectClass = rows[i].subjectClass;\r\n                \r\n                console.log(i+\"th tuple : \" + sub_inf.subjectNum + \" : \" + sub_inf.subjectName + \" : \" +  sub_inf.subjectClass);\r\n                \r\n                list.push(sub_inf);\r\n            }         \r\n            \r\n            res.is_success = 1;\r\n            res.subjectList = list;\r\n        }\r\n        //send to client\r\n        socket.emit('data', res) ;\r\n    });\r\n}\r\n\r\nfunction ClientRequestViewLectureList(received){\r\n    var res = WebpageTools.newResponse(); \r\n    \r\n    var list;\r\n    \r\n    var query = \"select latte_lecture.lectureNum, latte_lecture.lectureName \"\r\n                + \" from latte_lecture left join latte_subject \"\r\n                + \" on latte_lecture.subjectNum = latte_subject.subjectNum \" \r\n                + \" where latte_lecture.subjectNum = \" + received.subjecId;\r\n\r\n    \r\n    \r\n}\r\n\r\nfunction ClientRequestClassOrganize(received){\r\n    var res = WebpageTools.newResponse();\r\n}\r\n\r\nfunction ClientRequestClassSave(received){\r\n    var res = WebpageTools.newResponse();\r\n}\r\n\r\nfunction ViewAttendList(received){"],[0,"\r\n  "]],"start1":2579,"start2":2579,"length1":23,"length2":2573}]],"length":5159,"saved":false}
{"contributors":[],"silentsave":false,"ts":1370341278171,"patch":[[{"diffs":[[0,"d;\r\n\r\n    \r\n    "],[1," mysqlConn.query(query, function (err, rows){\r\n        if(err){\r\n            console.log(\"mysql query err\");\r\n            console.log(err);\r\n            res.success = 0;\r\n        }\r\n        \r\n        else if( rows.length ) {\r\n            \r\n            list = new Array(rows.length);\r\n            \r\n            for(var i = 0 ; i < rows.length ; i++){ //결과 -  for문 돌면서 list에 push\r\n                var lec_inf = WebpageTools.newLectureInfo();\r\n                \r\n                lec_inf.lectureNum = rows[i].lectureNum;\r\n                lec_inf.lectureName = rows[i].lectureName;\r\n                console.log(i+\"th tuple : \" + lec_inf.subjectNum + \" : \" + lec_inf.subjectName + \" : \" +  lec_inf.subjectClass);\r\n                \r\n                list.push(lec_inf);\r\n            }         \r\n            \r\n            res.is_success = 1;\r\n            res.subjectList = list;\r\n        }\r\n        //send to client\r\n        socket.emit('data', res) ;\r\n    });"],[0,"\r\n}\r\n\r\nfunction "]],"start1":4903,"start2":4903,"length1":32,"length2":982}]],"length":6109,"saved":false}
{"ts":1370341311037,"patch":[[{"diffs":[[0,"\" + lec_inf."],[-1,"subject"],[1,"lecture"],[0,"Num + \" : \" "]],"start1":5538,"start2":5538,"length1":31,"length2":31},{"diffs":[[0,"inf."],[-1,"subjectName + \" : \" +  lec_inf.subjectClass"],[1,"lectureName"],[0,");\r\n"]],"start1":5575,"start2":5575,"length1":51,"length2":19}]],"length":6077,"saved":false}
{"ts":1370341371862,"patch":[[{"diffs":[[0,"********\r\n\r\n"],[1,"// LOGIN\r\n"],[0,"function cli"]],"start1":1666,"start2":1666,"length1":24,"length2":34},{"diffs":[[0,"});\r\n    \r\n}\r\n\r\n"],[1,"// LOGOUT\r\n"],[0,"function clientR"]],"start1":2593,"start2":2593,"length1":32,"length2":43},{"diffs":[[0,"\n    \r\n}\r\n\r\n"],[1,"// CLASS LIST\r\n"],[0,"function cli"]],"start1":2826,"start2":2826,"length1":24,"length2":39},{"diffs":[[0,"\r\n    });\r\n}\r\n\r\n"],[1,"// LECTURE LIST\r\n"],[0,"function ClientR"]],"start1":4505,"start2":4505,"length1":32,"length2":49},{"diffs":[[0,"\r\n    });\r\n}\r\n\r\n"],[1,"// CLASS ORGINIZE\r\n"],[0,"function ClientR"]],"start1":5881,"start2":5881,"length1":32,"length2":51},{"diffs":[[0,"sponse();\r\n}\r\n\r\n"],[1,"// CLASS SAVE\r\n"],[0,"function ClientR"]],"start1":5996,"start2":5996,"length1":32,"length2":47},{"diffs":[[0,";\r\n}\r\n\r\n"],[1,"// VIEW ATTEND\r\n"],[0,"function"]],"start1":6111,"start2":6111,"length1":16,"length2":32}]],"length":6180,"saved":false}
{"ts":1370341747324,"patch":[[{"diffs":[[0,"IR = [];"],[1," //Logged id user list"],[0,"\r\nvar my"]],"start1":67,"start2":67,"length1":16,"length2":38},{"diffs":[[0,"sqlConn;"],[1," "],[0,"\r\nvar so"]],"start1":105,"start2":105,"length1":16,"length2":17},{"diffs":[[0,"ved,"],[-1," _ID_CONN_PAIR,"],[0," mys"]],"start1":294,"start2":294,"length1":23,"length2":8},{"diffs":[[0,"\n\t\r\n"],[-1,"    ID_CONN_PAIR = _ID_CONN_PAIR;\r\n"],[0,"    "]],"start1":317,"start2":317,"length1":43,"length2":8}]],"length":6153,"saved":false}
{"ts":1370342081270,"patch":[[{"diffs":[[0,"newResponse();\r\n"],[1,"    \r\n"],[0,"    res.MessageN"]],"start1":1791,"start2":1791,"length1":32,"length2":38},{"diffs":[[0,"LOGIN;\r\n"],[1,"    \r\n"],[0,"    res."]],"start1":1863,"start2":1863,"length1":16,"length2":22},{"diffs":[[0,"esponse();\r\n"],[1,"    \r\n"],[0,"    res.Mess"]],"start1":2677,"start2":2677,"length1":24,"length2":30},{"diffs":[[0,"SE_LOGOUT;\r\n"],[1,"    \r\n"],[0,"    res.is_s"]],"start1":2742,"start2":2742,"length1":24,"length2":30},{"diffs":[[0,"se(); \r\n"],[-1,"    \r\n"],[0,"    var "]],"start1":4621,"start2":4621,"length1":22,"length2":16},{"diffs":[[0,"ar list;\r\n    \r\n"],[1,"    res.MessageNum = WebpageTools.SREVER_RESPONSE_SELECTCLASS;\r\n    \r\n"],[0,"    var query = "]],"start1":4634,"start2":4634,"length1":32,"length2":102},{"diffs":[[0,"s.newResponse();"],[-1,""],[0,""],[1,"\r\n    \r\n    var list;\r\n    \r\n    "],[0,"\r\n}\r\n\r\n// CLASS "]],"start1":6050,"start2":6050,"length1":32,"length2":65}]],"length":6274,"saved":false}
{"ts":1370342109509,"patch":[[{"diffs":[[0,"\n    var list;\r\n"],[1,"    res.MessageNum = WebpageTools.SREVER_CLASSORGANIZE;\r\n    \r\n"],[0,"    \r\n    \r\n}\r\n\r"]],"start1":6073,"start2":6073,"length1":32,"length2":95}]],"length":6337,"saved":false}
{"ts":1370342498982,"patch":[[{"diffs":[[0,"\r\n    \r\n    "],[1," var query = \"select latte_lecture.lectureNum, latte_lecture.lectureName \"\r\n                + \" from latte_lecture left join latte_subject \"\r\n                + \" on latte_lecture.subjectNum = latte_subject.subjectNum \" \r\n                + \" where latte_lecture.subjectNum = \" + received.subjecId;\r\n\r\n    \r\n     mysqlConn.query(query, function (err, rows){\r\n        if(err){\r\n            console.log(\"mysql query err\");\r\n            console.log(err);\r\n            res.success = 0;\r\n        }\r\n        \r\n        else if( rows.length ) {\r\n            \r\n            list = new Array(rows.length);\r\n            \r\n            for(var i = 0 ; i < rows.length ; i++){ //결과 -  for문 돌면서 list에 push\r\n                var act_inf = WebpageTools.newActiviryInfo();\r\n                \r\n                console.log(i+\"th tuple : \" + act_inf.actNum + \" : \" + act_inf.actName + \" : \" + act_inf.actType + \" : \" + act_inf.actImg);\r\n                \r\n                list.push(act_inf);\r\n            }         \r\n            \r\n            res.is_success = 1;\r\n            res.subjectList = list;\r\n        }\r\n        //send to client\r\n        socket.emit('data', res) ;\r\n    });"],[0,"\r\n    \r\n}\r\n\r"]],"start1":6144,"start2":6144,"length1":24,"length2":1178}]],"length":7491,"saved":false}
{"ts":1370343379091,"patch":[[{"diffs":[[0,"tte_"],[-1,"subject.subject"],[1,"activity.activity"],[0,"Num,"],[1," "],[0,"latte_"],[-1,"subject.subject"],[1,"activity.activity"],[0,"Name,"],[1," "],[0,"latte_"],[-1,"subject.subjectClass\""],[1,"activity.activityType, latte_activity.activityRoute \" "],[0,"\r\n  "]],"start1":3062,"start2":3062,"length1":80,"length2":119},{"diffs":[[0," from latte_"],[-1,"subject"],[1,"activity"],[0," \"\r\n        "]],"start1":3198,"start2":3198,"length1":31,"length2":32},{"diffs":[[0,"n latte_"],[-1,"teach"],[1,"lecture_activity"],[0," \"\r\n    "]],"start1":3250,"start2":3250,"length1":21,"length2":32},{"diffs":[[0,"n latte_"],[-1,"teacher"],[1,"lecture"],[0," \"\r\n    "]],"start1":3307,"start2":3307,"length1":23,"length2":23},{"diffs":[[0,"tte_"],[-1,"teacher.teacherNum = latte_teach.teacherNum \"\r\n                + \" on latte_subject.subjectNum = latte_teach.subjectNum \"\r\n                + \" where teacherID= '\" + received.id + \"' "],[1,"lecture.lectureNum = latte_lecture_activity.lectureNum \"\r\n                + \" on latte_activity.activityNum = latte_activity.activityNum \"\r\n                + \" where latte_lecture.lectureNum = 1;\r\n"],[0,"\";\r\n"]],"start1":3351,"start2":3351,"length1":190,"length2":205},{"diffs":[[0,"              \r\n"],[1,"                \r\n"],[0,"                "]],"start1":6976,"start2":6976,"length1":32,"length2":50}]],"length":7575,"saved":false}
{"ts":1370343384576,"patch":[[{"diffs":[[0,"eNum = 1"],[-1,";\r\n"],[1," "],[0,"\";\r\n    "]],"start1":3541,"start2":3541,"length1":19,"length2":17}]],"length":7573,"saved":false}
{"ts":1370343471294,"patch":[[{"diffs":[[0,"m = "],[-1,"1 \""],[1,"\" + received.lectureId"],[0,";\r\n "]],"start1":3544,"start2":3544,"length1":11,"length2":30}]],"length":7592,"saved":false}
{"ts":1370343535900,"patch":[[{"diffs":[[0," received.subjec"],[-1,"Id"],[1,"tNum"],[0,";\r\n\r\n    \r\n     "]],"start1":5083,"start2":5083,"length1":34,"length2":36}]],"length":7594,"saved":false}
{"ts":1370343561814,"patch":[[{"diffs":[[0,".lecture"],[-1,"Id"],[1,"Num"],[0,";\r\n    \r"]],"start1":3560,"start2":3560,"length1":18,"length2":19},{"diffs":[[0,"d.subjec"],[-1,"Id"],[1,"tNum"],[0,";\r\n\r\n   "]],"start1":6527,"start2":6527,"length1":18,"length2":20}]],"length":7597,"saved":false}
{"ts":1370343638608,"patch":[[{"diffs":[[0,"\n               "],[1,"/*"],[0," + \" where latte"]],"start1":3494,"start2":3494,"length1":32,"length2":34},{"diffs":[[0,"d.lectureNum"],[1,"*/"],[0,";\r\n    \r\n   "]],"start1":3561,"start2":3561,"length1":24,"length2":26}]],"length":7601,"saved":false}
{"ts":1370343659952,"patch":[[{"diffs":[[0,"esponse();\r\n"],[1,"    \r\n    \r\n"],[0,"}\r\n\r\n// VIEW"]],"start1":7523,"start2":7523,"length1":24,"length2":36}]],"length":7613,"saved":false}
{"ts":1370343856497,"patch":[[{"diffs":[[0,"tte_"],[-1,"lecture.lectureNum, latte_lecture.lectureName"],[1,"activity.activityNum, latte_activity.activityName, latte_activity.activityType, latte_activity.activityRoute \" \r\n                 + \" from latte_activity"],[0," \""],[1," "],[0,"\r\n"],[1," "],[0,"    "]],"start1":6269,"start2":6269,"length1":57,"length2":167},{"diffs":[[0,"            + \" "],[-1,"from"],[1,"left join"],[0," latte_lecture l"]],"start1":6436,"start2":6436,"length1":36,"length2":41},{"diffs":[[0,"in latte_lecture"],[-1," left"],[1,"_activity \"\r\n                 + \" inner"],[0," join latte_subj"]],"start1":6459,"start2":6459,"length1":37,"length2":71},{"diffs":[[0," join latte_"],[-1,"subject"],[1,"lecture"],[0," \""],[1," "],[0,"\r\n"],[1," "],[0,"            "]],"start1":6514,"start2":6514,"length1":35,"length2":37},{"diffs":[[0,"n latte_lecture."],[-1,"subject"],[1,"lecture"],[0,"Num = latte_subj"]],"start1":6560,"start2":6560,"length1":39,"length2":39},{"diffs":[[0,"= latte_"],[-1,"subject.subject"],[1,"lecture_activity.lectureNum \"\r\n                 + \" on latte_activity.activityNum = latte_activity.activity"],[0,"Num \" \r\n"],[1," "],[0,"        "]],"start1":6587,"start2":6587,"length1":39,"length2":132},{"diffs":[[0,"tte_lecture."],[-1,"subject"],[1,"lecture"],[0,"Num ="],[1," 1;"],[0," \" + receive"]],"start1":6739,"start2":6739,"length1":36,"length2":39},{"diffs":[[0,"              \r\n"],[-1,""],[0,"                "]],"start1":7249,"start2":7249,"length1":32,"length2":32},{"diffs":[[0,"                "],[1,"act_inf.actImg = rows[i].act"],[0,"\r\n              "]],"start1":7265,"start2":7265,"length1":32,"length2":60}]],"length":7888,"saved":false}
{"ts":1370343907767,"patch":[[{"diffs":[[0,"ureNum ="],[-1," 1;"],[0," \" + rec"]],"start1":6755,"start2":6755,"length1":19,"length2":16}]],"length":7885,"saved":false}
{"ts":1370344051486,"patch":[[{"diffs":[[0,"s[i].act"],[1,"ivityRoute;\r\n                act_inf.actNum = rows[i].activityNum;\r\n                act_inf.actName = rows[i].activityName;\r\n                act_inf.actType = rows[i].activityType;\r\n                "],[0,"\r\n      "]],"start1":7298,"start2":7298,"length1":16,"length2":214}]],"length":8083,"saved":false}
{"ts":1370344963179,"patch":[[{"diffs":[[0,"ect "],[-1,"latte_activity.activityNum, latte_activity.activityName, latte_activity.activityType, latte_activity.activityRoute \" \r\n                + \" from latte_activity \"\r\n                + \" left join latte_lecture_activity \"\r\n                + \" inner join latte_lecture"],[1,"subjectNum, subjectName, subjectClass \" \r\n                + \" from latte_subject \"\r\n                + \" where subjectNum in"],[0," \""],[1," "],[0,"\r\n  "]],"start1":3056,"start2":3056,"length1":272,"length2":134},{"diffs":[[0,"+ \" "],[-1,"on latte_lecture.lectureNum = latte_lecture_activity.lectureNum \"\r\n                + \" on latte_activity.activityNum = latte_activity.activityNum \"\r\n               /* + \" where latte_lecture.lectureNum ="],[1,"(select subjectNum from latte_teach where teacherNum = \" \r\n                + \" (select teacherNum from latte_teacher where teacherId = '"],[0," \" +"]],"start1":3204,"start2":3204,"length1":211,"length2":144},{"diffs":[[0,"ved."],[-1,"lectureNum*/"],[1,"id + \"') ); \""],[0,";\r\n "]],"start1":3354,"start2":3354,"length1":20,"length2":21}]],"length":7879,"saved":false}
{"ts":1370345636845,"patch":[[{"diffs":[[0,"ect "],[-1,"latte_activity.activityNum, latte_activity.activityName, latte_activity.activityType, latte_activity."],[1,"activityNum, activityName, activityType, "],[0,"acti"]],"start1":6059,"start2":6059,"length1":109,"length2":49},{"diffs":[[0,"yRoute \""],[-1," "],[0,"\r\n      "]],"start1":6111,"start2":6111,"length1":17,"length2":16},{"diffs":[[0,"                "],[1,"   "],[0,"+ \" from latte_a"]],"start1":6122,"start2":6122,"length1":32,"length2":35},{"diffs":[[0,"tivity \""],[-1," "],[0,"\r\n"],[1,"   "],[0,"        "]],"start1":6158,"start2":6158,"length1":19,"length2":21},{"diffs":[[0,"+ \" "],[-1,"left join latte_lecture_"],[1,"where "],[0,"activity"],[-1," \"\r\n                 + \" inner join latte_lecture"],[1,"Num in"],[0," \" \r"]],"start1":6188,"start2":6188,"length1":89,"length2":28},{"diffs":[[0,"    "],[1,"   "],[0,"+ \" "],[-1,"on latte_lecture.lectureNum ="],[1,"(select activityNum from"],[0," lat"]],"start1":6230,"start2":6230,"length1":41,"length2":39},{"diffs":[[0,"activity"],[-1,"."],[1," where "],[0,"lectureN"]],"start1":6280,"start2":6280,"length1":17,"length2":23},{"diffs":[[0,"ctureNum"],[1," ="],[0," \"\r\n"],[1,"   "],[0,"        "]],"start1":6297,"start2":6297,"length1":20,"length2":25},{"diffs":[[0,"+ \" "],[-1,"on latte_activity.activityNum = latte_activity.activityNum \" \r\n                 + \" where"],[1,"(select lectureNum from"],[0," lat"]],"start1":6331,"start2":6331,"length1":97,"length2":31},{"diffs":[[0,"om latte_lecture"],[-1,"."],[1," where "],[0,"lectureNum = \" +"]],"start1":6356,"start2":6356,"length1":33,"length2":39},{"diffs":[[0,"lectureNum ="],[1," 1));"],[0," \" + receive"]],"start1":6379,"start2":6379,"length1":24,"length2":29}]],"length":7716,"saved":false}
{"ts":1370345645338,"patch":[[{"diffs":[[0,"ed.subjectNum;\r\n"],[-1,"\r\n"],[0,"    \r\n     mysql"]],"start1":6407,"start2":6407,"length1":34,"length2":32}]],"length":7714,"saved":false}
{"ts":1370345962449,"patch":[[{"diffs":[[0," var list;\r\n    "],[-1,"\r\n    "],[0,""],[1,""],[0,"res.MessageNum ="]],"start1":2946,"start2":2946,"length1":38,"length2":32},{"diffs":[[0," list;\r\n"],[-1,"    \r\n"],[0,"    res."]],"start1":4514,"start2":4514,"length1":22,"length2":16},{"diffs":[[0,"ize(received){\r\n"],[1,"    \r\n"],[0,"    var res = We"]],"start1":5883,"start2":5883,"length1":32,"length2":38},{"diffs":[[0,"esponse();\r\n"],[-1,"    \r\n"],[0,"    var list"]],"start1":5936,"start2":5936,"length1":30,"length2":24},{"diffs":[[0,"dList(received){"],[-1,""],[0,""],[1,"\r\n\r\n    var res = WebpageTools.newResponse();\r\n    var list;\r\n    res.MessageNum = WebpageTools.SERVER_RESPONSE_VIEWATTENDLIST;\r\n    \r\n     var query = \"select activityNum, activityName, activityType, activityRoute \"\r\n                    + \" from latte_activity \"\r\n                    + \" where activityNum in \" \r\n                    + \" (select activityNum from latte_lecture_activity where lectureNum = \"\r\n                    + \" (select lectureNum from latte_lecture where lectureNum = 1)); \" + received.subjectNum;\r\n    \r\n     mysqlConn.query(query, function (err, rows){\r\n        if(err){\r\n            console.log(\"mysql query err\");\r\n            console.log(err);\r\n            res.success = 0;\r\n        }\r\n        \r\n        else if( rows.length ) {\r\n            \r\n            list = new Array(rows.length);\r\n            \r\n            for(var i = 0 ; i < rows.length ; i++){ //결과 -  for문 돌면서 list에 push\r\n                var act_inf = WebpageTools.newActiviryInfo();\r\n                \r\n                act_inf.actImg = rows[i].activityRoute;\r\n                act_inf.actNum = rows[i].activityNum;\r\n                act_inf.actName = rows[i].activityName;\r\n                act_inf.actType = rows[i].activityType;\r\n                \r\n                console.log(i+\"th tuple : \" + act_inf.actNum + \" : \" + act_inf.actName + \" : \" + act_inf.actType + \" : \" + act_inf.actImg);\r\n                \r\n                list.push(act_inf);\r\n            }         \r\n            \r\n            res.is_success = 1;\r\n            res.subjectList = list;\r\n        }\r\n        //send to client\r\n        socket.emit('data', res) ;\r\n    });"],[0,"\r\n    \r\n}\r\n"]],"start1":7675,"start2":7675,"length1":27,"length2":1645}]],"length":9320,"saved":false}
{"ts":1370346064486,"patch":[[{"diffs":[[0,"           var a"],[-1,"c"],[0,"t"],[1,"tend"],[0,"_inf = WebpageTo"]],"start1":8605,"start2":8605,"length1":34,"length2":37},{"diffs":[[0,"    "],[-1," \r\n                act_inf.actImg = rows[i].activityRoute;\r\n                act_inf.actNum = rows[i].activityNum;\r\n                act_inf.actName = rows[i].activityName;\r\n                act_inf.actType = rows[i].activityType;\r\n                \r\n                console.log(i+\"th tuple : \" + act_inf.actNum + \" : \" + act_inf.actName + \" : \" + act_inf.actType + \" : \" + act_inf.actImg"],[1,"\r\n                \r\n                console.log(i+\"th tuple : \""],[0,");\r\n"]],"start1":8677,"start2":8677,"length1":392,"length2":71}]],"length":9002,"saved":false}
{"ts":1370346103966,"patch":[[{"diffs":[[0,"ebpageTools.newA"],[-1,"ctiviry"],[1,"ttend"],[0,"Info();\r\n       "]],"start1":8634,"start2":8634,"length1":39,"length2":37},{"diffs":[[0,"     list.push(a"],[-1,"c"],[0,"t"],[1,"tend"],[0,"_inf);\r\n        "]],"start1":8775,"start2":8775,"length1":34,"length2":37}]],"length":9003,"saved":false}
{"ts":1370346161607,"patch":[[{"diffs":[[0," = \""],[-1,"select activityNum, activityName, activityType, activityRoute \"\r\n                    + \" from latte_activity \"\r\n                    + \" where activityNum in \" \r\n                    + \" (select activityNum from latte_lecture_activity where lectureNum = \"\r\n                    + \" (select lectureNum from latte_lecture where lectureNum = 1)); \" + received.subjectNum"],[1,"\""],[0,";\r\n "]],"start1":7840,"start2":7840,"length1":372,"length2":9}]],"length":8640,"saved":false}
{"contributors":[],"silentsave":false,"ts":1370357344769,"patch":[[{"diffs":[[0,"eacherPw"],[1,",teacherNum"],[0," from la"]],"start1":2033,"start2":2033,"length1":16,"length2":27},{"diffs":[[0,"ed.id+\"'\";\r\n"],[-1,""],[0,"    \r\n    my"]],"start1":2099,"start2":2099,"length1":24,"length2":24},{"diffs":[[0,"eacherPw){\r\n"],[1,"             //ID 넣기\r\n             ID_CONN_PAIR.push(rows[0].teacherNum);\r\n"],[0,"            "]],"start1":2431,"start2":2431,"length1":24,"length2":99},{"diffs":[[0,"ponse();\r\n    \r\n"],[-1,""],[0,"    res.MessageN"]],"start1":2765,"start2":2765,"length1":32,"length2":32},{"diffs":[[0,"_LOGOUT;\r\n    \r\n"],[1,"    for(var i = 0 ; i <  ID_CONN_PAIR.length() ; i++){\r\n        if(ID_CONN_PAIR[i] == received.id)\r\n            ID_CONN_PAIR.pop();\r\n    }\r\n    \r\n"],[0,"    res.is_succe"]],"start1":2830,"start2":2830,"length1":32,"length2":178}]],"length":8872,"saved":false}
